# <span style="color: #FF5733;"> DKR 02: Basics. Флаги запуска </span>


## Внутреннее устройство Docker CLI

Docker CLI взаимодействует с Docker REST API, передавая системные запросы к Docker Daemon для выполнения ваших команд.
Ключевые понятия:

    $VAR_NAME - переменная, которая задается вне задачи и может иметь любое значение в зависимости от контекста (например, docker run $IMAGE).
    [] - необязательное содержимое в квадратных скобках, команда может работать и без него (например, docker run [-d] $IMAGE[:$TAG]).
    [() ...] - также необязательное содержимое в квадратных скобках, команда в круглых скобках может повторяться сколько угодно раз (например, шаблон docker run [-d] [(-p $HOST_PORT:$CONTAINER_PORT) ...] $IMAGE[:$TAG]).

## Docker Registry

**Docker Registry** - это сервис, где хранятся Docker образы. Он служит центральным хранилищем для образов Docker, позволяя пользователям сохранять, получать и управлять контейнерными образами.

- Public Registry: Это общедоступные реестры, такие как Docker Hub, где разработчики могут делиться своими образами с сообществом. Docker Hub является одним из самых популярных общедоступных реестров, предоставляющих как бесплатные, так и платные образы.

- Private Registry: Это локальные или частные реестры, которые могут быть развернуты внутри организации. Они обеспечивают возможность хранения и управления собственными образами Docker без доступа извне.

Реестры Docker обеспечивают удобный способ обмена и управления образами Docker между разработчиками и системами CI/CD (непрерывной интеграции/непрерывной доставки). Они играют ключевую роль в разработке и развертывании контейнеризованных приложений, обеспечивая централизованное хранение образов и доступ к ним.

## Использование образа Nginx в Docker
### Образы и теги

Docker предоставляет образы Nginx с различными тегами, отражающими разные версии или конфигурации образа. Каждый тег представляет определенную версию или конфигурацию Nginx, что позволяет выбрать нужную версию для вашего приложения.
Документация

Документация Nginx содержит информацию о его конфигурации, настройке, основных функциях и использовании. Она поможет разобраться в работе с сервером Nginx и его возможностями.
Использование образа Nginx в Docker

    Получение образа Nginx:

```
docker pull nginx:tag
```

Здесь tag - версия или конфигурация образа Nginx (например, latest для последней версии).

Запуск контейнера с Nginx:

```
    docker run -d -p 8080:80 --name mynginx nginx:tag
```
Где:

`-d` - запуск контейнера в фоновом режиме;

`-p 8080:80` - проброс портов (в данном случае, порт 8080 хоста на порт 80 контейнера);

`--name mynginx` - задание имени контейнера (можно выбрать любое имя);

`nginx:tag` - указание образа Nginx с нужным тегом (версией).

### Основные команды Docker

Команда `docker ps` отображает запущенные контейнеры, их состояния, ID и имена.


`docker ps -a` показывает все контейнеры, включая остановленные.


`docker images` выводит список доступных образов и их размеры.

`docker run`
cоздает новый контейнер из образа с возможностью настройки.

`docker start id_container`запускает или перезапускает контейнер.

`docker rm test` удаляет контейнер.

`docker kill test` принудительно завершает контейнер.

`docker rm -f test` удаляет контейнер "test", даже если он запущен.

`docker rmi ubuntu:latest` удаляет образ "ubuntu" с тегом "latest".
### Работа с файлами в контейнерах Docker

`docker exec -it web bash` позволяет запустить интерактивную оболочку в контейнере с именем "web".

 Флаги `-it` создают интерактивную сессию (i) и назначают терминал (t), а `bash` запускает оболочку внутри контейнера.

`docker run --name web -d -v /data:/internal -p 8080:80 nginx`

Создает контейнер с привязкой тома и пробросом портов для взаимодействия с хостом.

- Флаг `--name web` задает имя контейнера как "web".
- Флаг `-d` запускает контейнер в фоновом режиме.
- Флаг `-v /data:/internal` создает привязку тома: `/data` на хосте связывается с `/internal` внутри контейнера.
- Флаг `-p 8080:80` пробрасывает порт 8080 хоста на порт 80 контейнера.

Эти флаги позволяют:

- `-v` монтировать тома, обеспечивая постоянное хранение данных между контейнерами и хостом.
- `-p` пробрасывать порты, позволяя внешним приложениям общаться с контейнером через определенные порты.